<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>History Timeline Challenge</title>
    <style>
        :root {
            --primary: #4f46e5; --secondary: #22c55e; --danger: #ef4444;
            --warning: #f59e0b; --info: #3b82f6; --light-gray: #f8f9fa;
            --medium-gray: #e5e7eb; --text-dark: #1e293b; --text-light: #64748b;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background-color: var(--light-gray); color: var(--text-dark); min-height: 100vh; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; background: #ffffff; border-radius: 20px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08); overflow: hidden; }
        .header { background-color: var(--primary); color: white; padding: 30px; text-align: center; }
        .header h1 { font-size: 2.5rem; }
        .game-content { padding: 30px; }
        .intro-screen { text-align: center; padding: 50px 0; }
        .difficulty-buttons { display: flex; justify-content: center; gap: 20px; margin: 30px 0; }
        .btn { padding: 15px 30px; border: none; border-radius: 10px; font-size: 1.1rem; cursor: pointer; transition: all 0.2s ease; font-weight: bold; }
        .difficulty-btn { background: #f1f5f9; color: var(--text-dark); border: 2px solid var(--medium-gray); }
        .difficulty-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .difficulty-btn.selected { background: var(--primary); color: white; border-color: var(--primary); }
        .start-btn { background-color: var(--secondary); color: white; }
        .check-btn { background-color: var(--info); color: white; }
        .reset-btn { background-color: var(--warning); color: white; }
        .restart-btn { background-color: var(--danger); color: white; }
        .game-area { display: none; }
        .timer-bar-container { width: 100%; height: 20px; background: var(--medium-gray); border-radius: 10px; overflow: hidden; margin-bottom: 20px; }
        .timer-bar { height: 100%; background: var(--secondary); transition: width 0.1s linear, background 0.3s ease; }
        .timer-bar.warning { background: var(--danger); }
        .game-controls { text-align: center; margin-bottom: 30px; display: flex; gap: 10px; justify-content: center; }
        .main-game { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; }
        .events-pool, .timeline-area { background: var(--light-gray); border-radius: 15px; padding: 25px; }
        h3 { text-align: center; margin-bottom: 20px; }
        .event-item { background: white; border: 2px solid var(--medium-gray); border-radius: 10px; padding: 15px; margin-bottom: 15px; cursor: move; }
        .event-item.dragging { opacity: 0.5; }
        .timeline-slot { background: #f1f5f9; border: 2px dashed #cbd5e1; border-radius: 10px; padding: 15px; margin-bottom: 15px; min-height: 80px; position: relative; }
        .timeline-slot.drag-over { background: #eef2ff; border-color: var(--info); }
        .timeline-slot.correct { background: #dcfce7; border-color: var(--secondary); }
        .timeline-slot.incorrect { background: #fee2e2; border-color: var(--danger); }
        .result-message { text-align: center; padding: 20px; margin-top: 20px; border-radius: 10px; font-size: 1.2rem; font-weight: bold; }
        .result-message.success { background: #dcfce7; color: #166534; }
        .result-message.partial { background: #fef3c7; color: #92400e; }
        .result-message.failure { background: #fee2e2; color: #991b1b; }
        .back-btn { display: inline-block; background: #ffffff; color: var(--primary); text-decoration: none; border: 2px solid var(--medium-gray); padding: 10px 20px; border-radius: 12px; font-size: 16px; cursor: pointer; margin-bottom: 20px; font-weight: 600; }
        .back-btn:hover { background: var(--light-gray); }
    </style>
</head>
<body>
    <div class="container">
        <a href="game.html" class="back-btn" style="position: absolute; top: 10px; left: 10px;">‚¨Ö Back to Home</a>
        <div class="header">
            <h1>üèõÔ∏è History Timeline Challenge</h1>
            <p>Order the events of Indian Independence from earliest to latest.</p>
        </div>
        <div class="game-content">
            <div id="intro-screen" class="intro-screen">
                <div class="difficulty-selector">
                    <h3>Choose Difficulty:</h3>
                    <div class="difficulty-buttons">
                        <button class="difficulty-btn btn" data-difficulty="easy">Easy (3 Events)</button>
                        <button class="difficulty-btn btn selected" data-difficulty="medium">Medium (4 Events)</button>
                        <button class="difficulty-btn btn" data-difficulty="hard">Hard (6 Events)</button>
                    </div>
                </div>
                <button id="start-btn" class="start-btn btn">üöÄ Start Challenge</button>
            </div>
            <div id="game-area" class="game-area">
                <div class="timer-bar-container"><div id="timer-bar" class="timer-bar"></div></div>
                <div class="game-controls">
                    <button id="check-btn" class="check-btn btn">‚úÖ Check Order</button>
                    <button id="reset-btn" class="reset-btn btn">üîÑ Reset</button>
                    <button id="restart-btn" class="restart-btn btn">üè† New Game</button>
                </div>
                <div id="result-message" style="display: none;"></div>
                <div class="main-game">
                    <div class="events-pool">
                        <h3>üìö Historical Events (Drag from here)</h3>
                        <div id="events-container"></div>
                    </div>
                    <div class="timeline-area">
                        <h3>üìÖ Timeline (Drop here)</h3>
                        <div id="timeline-container"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        // Paste the existing JavaScript code here - it doesn't need to be changed.
         const historicalEvents = [
            { name: "Battle of Plassey" , date:"guess" },
            { name: "Regulating Act",  date:"guess" },
            { name: "Charter Act", date: "guess" },
            { name: "Indian Rebellion (Sepoy Mutiny)", date: "guess"},
            { name: "Government of India Act", date: "guess", },
            { name: "Indian Councils Act", date: "guess", },
            { name: "Formation of Indian National Congress", date: "guess"},
            { name: "Partition of Bengal", date: "guess" },
            { name: "Jallianwala Bagh Massacre", date: "guess" },
            { name: "Non-Cooperation Movement begins", date: "guess" },
            { name: "Chauri Chaura incident", date: "guess" },
            { name: "Simon Commission arrives", date: "guess" },
            { name: "Lahore session of INC", date: "guess" },
            { name: "Dandi Salt March", date: "guess" },
            { name: "Civil Disobedience Movement", date: "guess"},
            { name: "Government of India Act", date: "guess" },
            { name: "Quit India Movement", date: "guess" },
            { name: "Indian Independence Act", date: "guess" },
            { name: "Partition of India", date: "guess"},
            { name: "Assassination of Mahatma Gandhi", date: "guess" },
            { name: "Constitution of India adopted", date: "guess" },
            { name: "Formation of All India Muslim League", date: "guess"},
            { name: "Lucknow Pact", date: "guess" }
        ];

        let gameState = {
            currentDifficulty: 'medium', currentEvents: [], timerInterval: null,
            timeLeft: 60, gameActive: false, playerOrder: []
        };

        const introScreen = document.getElementById('intro-screen');
        const gameArea = document.getElementById('game-area');
        const startBtn = document.getElementById('start-btn');
        const restartBtn = document.getElementById('restart-btn');
        const checkBtn = document.getElementById('check-btn');
        const resetBtn = document.getElementById('reset-btn');
        const timerBar = document.getElementById('timer-bar');
        const eventsContainer = document.getElementById('events-container');
        const timelineContainer = document.getElementById('timeline-container');
        const resultMessage = document.getElementById('result-message');
        const difficultyButtons = document.querySelectorAll('.difficulty-btn');

        startBtn.addEventListener('click', startGame);
        restartBtn.addEventListener('click', () => location.reload()); // Simple restart
        checkBtn.addEventListener('click', checkOrder);
        resetBtn.addEventListener('click', () => setupGameBoard(false)); // Reset without picking new events

        difficultyButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                difficultyButtons.forEach(b => b.classList.remove('selected'));
                btn.classList.add('selected');
                gameState.currentDifficulty = btn.dataset.difficulty;
            });
        });

        function startGame() {
            introScreen.style.display = 'none';
            gameArea.style.display = 'block';
            initializeGame();
        }

        function initializeGame() {
            gameState.timeLeft = 60;
            gameState.gameActive = true;
            resultMessage.style.display = 'none';
            
            const eventCounts = { easy: 3, medium: 4, hard: 6 };
            const eventCount = eventCounts[gameState.currentDifficulty];
            
            const shuffled = [...historicalEvents].sort(() => 0.5 - Math.random());
            const selectedEvents = shuffled.slice(0, eventCount);
            
            gameState.currentEvents = selectedEvents.sort((a, b) => a.year - b.year);
            
            setupGameBoard(true);
            startTimer();
        }

        function setupGameBoard(shuffleForDisplay) {
            eventsContainer.innerHTML = '';
            timelineContainer.innerHTML = '';
            
            let displayEvents = [...gameState.currentEvents];
            if (shuffleForDisplay) {
                displayEvents = displayEvents.sort(() => 0.5 - Math.random());
            }

            displayEvents.forEach((event) => {
                const eventElement = createEventElement(event);
                eventsContainer.appendChild(eventElement);
            });
            
            for (let i = 0; i < gameState.currentEvents.length; i++) {
                const slot = createTimelineSlot(i);
                timelineContainer.appendChild(slot);
            }
        }

        function createEventElement(event) {
            const div = document.createElement('div');
            div.className = 'event-item';
            div.draggable = true;
            div.dataset.eventName = event.name;
            div.innerHTML = `<div class="event-name">${event.name}</div>`;
            div.addEventListener('dragstart', e => {
                e.dataTransfer.setData('text/plain', event.name);
                e.target.classList.add('dragging');
            });
            div.addEventListener('dragend', e => e.target.classList.remove('dragging'));
            return div;
        }

        function createTimelineSlot(position) {
            const div = document.createElement('div');
            div.className = 'timeline-slot';
            div.dataset.position = position;
            div.addEventListener('dragover', e => { e.preventDefault(); e.currentTarget.classList.add('drag-over'); });
            div.addEventListener('dragleave', e => e.currentTarget.classList.remove('drag-over'));
            div.addEventListener('drop', e => {
                e.preventDefault();
                e.currentTarget.classList.remove('drag-over');
                const eventName = e.dataTransfer.getData('text/plain');
                const eventElement = document.querySelector(`[data-event-name="${eventName}"]`);
                if (e.currentTarget.children.length === 0) { // Allow drop only if slot is empty
                    e.currentTarget.appendChild(eventElement);
                }
            });
            return div;
        }

        function startTimer() {
            clearInterval(gameState.timerInterval);
            timerBar.style.width = '100%';
            timerBar.classList.remove('warning');
            gameState.timerInterval = setInterval(() => {
                gameState.timeLeft--;
                timerBar.style.width = `${(gameState.timeLeft / 60) * 100}%`;
                if (gameState.timeLeft <= 10) timerBar.classList.add('warning');
                if (gameState.timeLeft <= 0) {
                    clearInterval(gameState.timerInterval);
                    checkOrder();
                }
            }, 1000);
        }

        function checkOrder() {
            gameState.gameActive = false;
            clearInterval(gameState.timerInterval);
            
            let correctCount = 0;
            const slots = document.querySelectorAll('.timeline-slot');
            
            slots.forEach((slot, index) => {
                const eventElement = slot.querySelector('.event-item');
                if (eventElement) {
                    const eventName = eventElement.dataset.eventName;
                    if (gameState.currentEvents[index].name === eventName) {
                        slot.classList.add('correct');
                        correctCount++;
                    } else {
                        slot.classList.add('incorrect');
                    }
                }
            });

            showResult(correctCount, gameState.currentEvents.length);
        }

        function showResult(correct, total) {
            let message, className;
            if (correct === total) {
                message = `üéâ Perfect! You got all ${total} events correct!`;
                className = 'success';
            } else {
                message = `üëç Good try! You placed ${correct} out of ${total} events correctly.`;
                className = correct > total / 2 ? 'partial' : 'failure';
            }
            resultMessage.textContent = message;
            resultMessage.className = `result-message ${className}`;
            resultMessage.style.display = 'block';
        }
    </script>
</body>
</html>